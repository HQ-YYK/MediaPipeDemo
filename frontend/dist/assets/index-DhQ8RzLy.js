import{r as f,a as Qe,R as Je}from"./vendor-nf7bT_Uh.js";import{P as Ae,H as Se}from"./mediapipe-D662JjxJ.js";import{E as et,V as O,M as Y,T as F,S as Re,Q as Me,a as S,R as tt,P as nt,b as ot,c as at,C as st,d as it,W as rt,e as ct,A as lt,D as Te,f as ut,G as dt,g as pt,h as mt,i as ft,B as ht,L as gt,j as bt}from"./three-Ds1OSMYV.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const R of s.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&e(R)}).observe(document,{childList:!0,subtree:!0});function A(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(n){if(n.ep)return;n.ep=!0;const s=A(n);fetch(n.href,s)}})();var Ne={exports:{}},Q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yt=f,Et=Symbol.for("react.element"),Pt=Symbol.for("react.fragment"),wt=Object.prototype.hasOwnProperty,jt=yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rt={key:!0,ref:!0,__self:!0,__source:!0};function De(j,r,A){var e,n={},s=null,R=null;A!==void 0&&(s=""+A),r.key!==void 0&&(s=""+r.key),r.ref!==void 0&&(R=r.ref);for(e in r)wt.call(r,e)&&!Rt.hasOwnProperty(e)&&(n[e]=r[e]);if(j&&j.defaultProps)for(e in r=j.defaultProps,r)n[e]===void 0&&(n[e]=r[e]);return{$$typeof:Et,type:j,key:s,ref:R,props:n,_owner:jt.current}}Q.Fragment=Pt;Q.jsx=De;Q.jsxs=De;Ne.exports=Q;var l=Ne.exports,se={},Oe=Qe;se.createRoot=Oe.createRoot,se.hydrateRoot=Oe.hydrateRoot;let _=null,$=!1;const Mt=async()=>{if(!(_||$)){$=!0;try{console.log("È¢ÑÂä†ËΩΩ MediaPipe Ê®°Âûã...");const j=await Ae.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.9/wasm");_=await Se.createFromOptions(j,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task",delegate:"GPU"},runningMode:"VIDEO",numPoses:1}),console.log("MediaPipe Ê®°ÂûãÈ¢ÑÂä†ËΩΩÂÆåÊàê")}catch(j){console.error("Ê®°ÂûãÈ¢ÑÂä†ËΩΩÂ§±Ë¥•:",j)}finally{$=!1}}};Mt();const Tt=({onPoseDetection:j})=>{const r=f.useRef(null),A=f.useRef(null),e=f.useRef(null),n=f.useRef(null),s=f.useRef(null),[R,p]=f.useState(!1),[E,v]=f.useState(null),[x,c]=f.useState("ÂáÜÂ§á‰∏≠..."),h=[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[12,14],[14,16],[15,17],[15,19],[15,21],[17,19],[16,18],[16,20],[18,20],[23,24],[23,25],[25,27],[27,29],[27,31],[24,26],[26,28],[28,30],[28,32]],u=async()=>{try{c("Ê≠£Âú®ÂêØÂä®Áõ∏Êú∫...");const[o,b]=await Promise.all([(async()=>{if(_)return c("Ê®°ÂûãÂ∑≤Â∞±Áª™ÔºåÊ≠£Âú®ÂêØÂä®Áõ∏Êú∫..."),_;for(c("Ê≠£Âú®Âä†ËΩΩ MediaPipe Ê®°Âûã...");$;)await new Promise(m=>setTimeout(m,100));if(_)return _;c("ÈáçÊñ∞Âä†ËΩΩÊ®°Âûã...");const g=await Ae.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.9/wasm");return await Se.createFromOptions(g,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task",delegate:"GPU"},runningMode:"VIDEO",numPoses:1})})(),navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"user"}})]);e.current=o,n.current=b,c("Ê≠£Âú®ËøûÊé•ËßÜÈ¢ëÊµÅ..."),r.current&&(r.current.srcObject=b,r.current.onloadedmetadata=()=>{c("Ê≠£Âú®ÂêØÂä®ÂßøÊÄÅÊ£ÄÊµã..."),i(),p(!0),c("‚úÖ Â∑≤ËøûÊé•")}),console.log("MediaPipe ÂíåÁõ∏Êú∫Âø´ÈÄüÂàùÂßãÂåñÊàêÂäü")}catch(o){console.error("ÂàùÂßãÂåñÂ§±Ë¥•:",o),v("ÂàùÂßãÂåñÂ§±Ë¥•: "+(o instanceof Error?o.message:"Êú™Áü•ÈîôËØØ"))}},i=()=>{const o=async()=>{if(e.current&&r.current&&r.current.readyState===4){const b=performance.now(),g=e.current.detectForVideo(r.current,b);if(g.landmarks&&g.landmarks.length>0){const M={success:!0,landmarks:g.landmarks[0].map((T,P)=>({id:P,x:T.x,y:T.y,z:T.z,visibility:T.visibility||1})),connections:h};j(M)}}s.current=requestAnimationFrame(o)};o()};return f.useEffect(()=>(u(),()=>{s.current&&cancelAnimationFrame(s.current),n.current&&n.current.getTracks().forEach(o=>o.stop()),e.current&&e.current!==_&&e.current.close()}),[]),E?l.jsx("div",{className:"camera-capture error",children:l.jsxs("div",{className:"error-message",children:[l.jsx("h3",{children:"‚ùå ÈîôËØØ"}),l.jsx("p",{children:E}),l.jsx("button",{onClick:()=>window.location.reload(),children:"Âà∑Êñ∞È°µÈù¢ÈáçËØï"})]})}):l.jsxs("div",{className:"camera-capture",children:[l.jsxs("div",{className:"camera-header",children:[l.jsx("h3",{children:"üì∑ Áõ∏Êú∫ÊçïËé∑"}),l.jsx("div",{className:"status",children:R?"‚úÖ Â∑≤ËøûÊé•":x})]}),l.jsxs("div",{className:"camera-container",children:[l.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"camera-video"}),l.jsx("canvas",{ref:A,className:"camera-canvas",width:640,height:480}),!R&&l.jsxs("div",{className:"loading-overlay",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:x})]})]})]})},ve={type:"change"},ae={type:"start"},xe={type:"end"},q=new tt,Le=new nt,Ot=Math.cos(70*ot.DEG2RAD);class vt extends et{constructor(r,A){super(),this.object=r,this.domElement=A,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new O,this.cursor=new O,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Y.ROTATE,MIDDLE:Y.DOLLY,RIGHT:Y.PAN},this.touches={ONE:F.ROTATE,TWO:F.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return p.phi},this.getAzimuthalAngle=function(){return p.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",ne),this._domElementKeyEvents=t},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ne),this._domElementKeyEvents=null},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(ve),e.update(),s=n.NONE},this.update=function(){const t=new O,a=new Me().setFromUnitVectors(r.up,new O(0,1,0)),y=a.clone().invert(),w=new O,L=new Me,z=new O,k=2*Math.PI;return function($e=null){const je=e.object.position;t.copy(je).sub(e.target),t.applyQuaternion(a),p.setFromVector3(t),e.autoRotate&&s===n.NONE&&H(Ie($e)),e.enableDamping?(p.theta+=E.theta*e.dampingFactor,p.phi+=E.phi*e.dampingFactor):(p.theta+=E.theta,p.phi+=E.phi);let D=e.minAzimuthAngle,I=e.maxAzimuthAngle;isFinite(D)&&isFinite(I)&&(D<-Math.PI?D+=k:D>Math.PI&&(D-=k),I<-Math.PI?I+=k:I>Math.PI&&(I-=k),D<=I?p.theta=Math.max(D,Math.min(I,p.theta)):p.theta=p.theta>(D+I)/2?Math.max(D,p.theta):Math.min(I,p.theta)),p.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,p.phi)),p.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(x,e.dampingFactor):e.target.add(x),e.target.sub(e.cursor),e.target.clampLength(e.minTargetRadius,e.maxTargetRadius),e.target.add(e.cursor),e.zoomToCursor&&N||e.object.isOrthographicCamera?p.radius=ee(p.radius):p.radius=ee(p.radius*v),t.setFromSpherical(p),t.applyQuaternion(y),je.copy(e.target).add(t),e.object.lookAt(e.target),e.enableDamping===!0?(E.theta*=1-e.dampingFactor,E.phi*=1-e.dampingFactor,x.multiplyScalar(1-e.dampingFactor)):(E.set(0,0,0),x.set(0,0,0));let W=!1;if(e.zoomToCursor&&N){let U=null;if(e.object.isPerspectiveCamera){const Z=t.length();U=ee(Z*v);const B=Z-U;e.object.position.addScaledVector(T,B),e.object.updateMatrixWorld()}else if(e.object.isOrthographicCamera){const Z=new O(P.x,P.y,0);Z.unproject(e.object),e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/v)),e.object.updateProjectionMatrix(),W=!0;const B=new O(P.x,P.y,0);B.unproject(e.object),e.object.position.sub(B).add(Z),e.object.updateMatrixWorld(),U=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;U!==null&&(this.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar(U).add(e.object.position):(q.origin.copy(e.object.position),q.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot(q.direction))<Ot?r.lookAt(e.target):(Le.setFromNormalAndCoplanarPoint(e.object.up,e.target),q.intersectPlane(Le,e.target))))}else e.object.isOrthographicCamera&&(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/v)),e.object.updateProjectionMatrix(),W=!0);return v=1,N=!1,W||w.distanceToSquared(e.object.position)>R||8*(1-L.dot(e.object.quaternion))>R||z.distanceToSquared(e.target)>0?(e.dispatchEvent(ve),w.copy(e.object.position),L.copy(e.object.quaternion),z.copy(e.target),W=!1,!0):!1}}(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",Pe),e.domElement.removeEventListener("pointerdown",ye),e.domElement.removeEventListener("pointercancel",K),e.domElement.removeEventListener("wheel",Ee),e.domElement.removeEventListener("pointermove",te),e.domElement.removeEventListener("pointerup",K),e._domElementKeyEvents!==null&&(e._domElementKeyEvents.removeEventListener("keydown",ne),e._domElementKeyEvents=null)};const e=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=n.NONE;const R=1e-6,p=new Re,E=new Re;let v=1;const x=new O,c=new S,h=new S,u=new S,i=new S,o=new S,b=new S,g=new S,m=new S,M=new S,T=new O,P=new S;let N=!1;const d=[],V={};function Ie(t){return t!==null?2*Math.PI/60*e.autoRotateSpeed*t:2*Math.PI/60/60*e.autoRotateSpeed}function X(){return Math.pow(.95,e.zoomSpeed)}function H(t){E.theta-=t}function G(t){E.phi-=t}const ie=function(){const t=new O;return function(y,w){t.setFromMatrixColumn(w,0),t.multiplyScalar(-y),x.add(t)}}(),re=function(){const t=new O;return function(y,w){e.screenSpacePanning===!0?t.setFromMatrixColumn(w,1):(t.setFromMatrixColumn(w,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(y),x.add(t)}}(),C=function(){const t=new O;return function(y,w){const L=e.domElement;if(e.object.isPerspectiveCamera){const z=e.object.position;t.copy(z).sub(e.target);let k=t.length();k*=Math.tan(e.object.fov/2*Math.PI/180),ie(2*y*k/L.clientHeight,e.object.matrix),re(2*w*k/L.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?(ie(y*(e.object.right-e.object.left)/e.object.zoom/L.clientWidth,e.object.matrix),re(w*(e.object.top-e.object.bottom)/e.object.zoom/L.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}}();function J(t){e.object.isPerspectiveCamera||e.object.isOrthographicCamera?v/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function ce(t){e.object.isPerspectiveCamera||e.object.isOrthographicCamera?v*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function le(t){if(!e.zoomToCursor)return;N=!0;const a=e.domElement.getBoundingClientRect(),y=t.clientX-a.left,w=t.clientY-a.top,L=a.width,z=a.height;P.x=y/L*2-1,P.y=-(w/z)*2+1,T.set(P.x,P.y,1).unproject(e.object).sub(e.object.position).normalize()}function ee(t){return Math.max(e.minDistance,Math.min(e.maxDistance,t))}function ue(t){c.set(t.clientX,t.clientY)}function ke(t){le(t),g.set(t.clientX,t.clientY)}function de(t){i.set(t.clientX,t.clientY)}function _e(t){h.set(t.clientX,t.clientY),u.subVectors(h,c).multiplyScalar(e.rotateSpeed);const a=e.domElement;H(2*Math.PI*u.x/a.clientHeight),G(2*Math.PI*u.y/a.clientHeight),c.copy(h),e.update()}function Ce(t){m.set(t.clientX,t.clientY),M.subVectors(m,g),M.y>0?J(X()):M.y<0&&ce(X()),g.copy(m),e.update()}function ze(t){o.set(t.clientX,t.clientY),b.subVectors(o,i).multiplyScalar(e.panSpeed),C(b.x,b.y),i.copy(o),e.update()}function Ye(t){le(t),t.deltaY<0?ce(X()):t.deltaY>0&&J(X()),e.update()}function Fe(t){let a=!1;switch(t.code){case e.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?G(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):C(0,e.keyPanSpeed),a=!0;break;case e.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?G(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):C(0,-e.keyPanSpeed),a=!0;break;case e.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?H(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):C(e.keyPanSpeed,0),a=!0;break;case e.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?H(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):C(-e.keyPanSpeed,0),a=!0;break}a&&(t.preventDefault(),e.update())}function pe(){if(d.length===1)c.set(d[0].pageX,d[0].pageY);else{const t=.5*(d[0].pageX+d[1].pageX),a=.5*(d[0].pageY+d[1].pageY);c.set(t,a)}}function me(){if(d.length===1)i.set(d[0].pageX,d[0].pageY);else{const t=.5*(d[0].pageX+d[1].pageX),a=.5*(d[0].pageY+d[1].pageY);i.set(t,a)}}function fe(){const t=d[0].pageX-d[1].pageX,a=d[0].pageY-d[1].pageY,y=Math.sqrt(t*t+a*a);g.set(0,y)}function He(){e.enableZoom&&fe(),e.enablePan&&me()}function Ke(){e.enableZoom&&fe(),e.enableRotate&&pe()}function he(t){if(d.length==1)h.set(t.pageX,t.pageY);else{const y=oe(t),w=.5*(t.pageX+y.x),L=.5*(t.pageY+y.y);h.set(w,L)}u.subVectors(h,c).multiplyScalar(e.rotateSpeed);const a=e.domElement;H(2*Math.PI*u.x/a.clientHeight),G(2*Math.PI*u.y/a.clientHeight),c.copy(h)}function ge(t){if(d.length===1)o.set(t.pageX,t.pageY);else{const a=oe(t),y=.5*(t.pageX+a.x),w=.5*(t.pageY+a.y);o.set(y,w)}b.subVectors(o,i).multiplyScalar(e.panSpeed),C(b.x,b.y),i.copy(o)}function be(t){const a=oe(t),y=t.pageX-a.x,w=t.pageY-a.y,L=Math.sqrt(y*y+w*w);m.set(0,L),M.set(0,Math.pow(m.y/g.y,e.zoomSpeed)),J(M.y),g.copy(m)}function Ue(t){e.enableZoom&&be(t),e.enablePan&&ge(t)}function Ze(t){e.enableZoom&&be(t),e.enableRotate&&he(t)}function ye(t){e.enabled!==!1&&(d.length===0&&(e.domElement.setPointerCapture(t.pointerId),e.domElement.addEventListener("pointermove",te),e.domElement.addEventListener("pointerup",K)),Be(t),t.pointerType==="touch"?Ge(t):Ve(t))}function te(t){e.enabled!==!1&&(t.pointerType==="touch"?We(t):Xe(t))}function K(t){qe(t),d.length===0&&(e.domElement.releasePointerCapture(t.pointerId),e.domElement.removeEventListener("pointermove",te),e.domElement.removeEventListener("pointerup",K)),e.dispatchEvent(xe),s=n.NONE}function Ve(t){let a;switch(t.button){case 0:a=e.mouseButtons.LEFT;break;case 1:a=e.mouseButtons.MIDDLE;break;case 2:a=e.mouseButtons.RIGHT;break;default:a=-1}switch(a){case Y.DOLLY:if(e.enableZoom===!1)return;ke(t),s=n.DOLLY;break;case Y.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;de(t),s=n.PAN}else{if(e.enableRotate===!1)return;ue(t),s=n.ROTATE}break;case Y.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;ue(t),s=n.ROTATE}else{if(e.enablePan===!1)return;de(t),s=n.PAN}break;default:s=n.NONE}s!==n.NONE&&e.dispatchEvent(ae)}function Xe(t){switch(s){case n.ROTATE:if(e.enableRotate===!1)return;_e(t);break;case n.DOLLY:if(e.enableZoom===!1)return;Ce(t);break;case n.PAN:if(e.enablePan===!1)return;ze(t);break}}function Ee(t){e.enabled===!1||e.enableZoom===!1||s!==n.NONE||(t.preventDefault(),e.dispatchEvent(ae),Ye(t),e.dispatchEvent(xe))}function ne(t){e.enabled===!1||e.enablePan===!1||Fe(t)}function Ge(t){switch(we(t),d.length){case 1:switch(e.touches.ONE){case F.ROTATE:if(e.enableRotate===!1)return;pe(),s=n.TOUCH_ROTATE;break;case F.PAN:if(e.enablePan===!1)return;me(),s=n.TOUCH_PAN;break;default:s=n.NONE}break;case 2:switch(e.touches.TWO){case F.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;He(),s=n.TOUCH_DOLLY_PAN;break;case F.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Ke(),s=n.TOUCH_DOLLY_ROTATE;break;default:s=n.NONE}break;default:s=n.NONE}s!==n.NONE&&e.dispatchEvent(ae)}function We(t){switch(we(t),s){case n.TOUCH_ROTATE:if(e.enableRotate===!1)return;he(t),e.update();break;case n.TOUCH_PAN:if(e.enablePan===!1)return;ge(t),e.update();break;case n.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;Ue(t),e.update();break;case n.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Ze(t),e.update();break;default:s=n.NONE}}function Pe(t){e.enabled!==!1&&t.preventDefault()}function Be(t){d.push(t)}function qe(t){delete V[t.pointerId];for(let a=0;a<d.length;a++)if(d[a].pointerId==t.pointerId){d.splice(a,1);return}}function we(t){let a=V[t.pointerId];a===void 0&&(a=new S,V[t.pointerId]=a),a.set(t.pageX,t.pageY)}function oe(t){const a=t.pointerId===d[0].pointerId?d[1]:d[0];return V[a.pointerId]}e.domElement.addEventListener("contextmenu",Pe),e.domElement.addEventListener("pointerdown",ye),e.domElement.addEventListener("pointercancel",K),e.domElement.addEventListener("wheel",Ee,{passive:!1}),this.update()}}const xt=({poseData:j})=>{const r=f.useRef(null),A=f.useRef(null),e=f.useRef(null),n=f.useRef(null),s=f.useRef(null),R=f.useRef([]),p=f.useRef([]),E=f.useRef(null),v=f.useRef(null),x=f.useRef(null);return f.useEffect(()=>{if(!r.current)return;const c=r.current,h=new at;h.background=new st(2763306),A.current=h;const u=new it(60,c.clientWidth/c.clientHeight,.1,1e3);u.position.set(0,0,5),e.current=u;const i=new rt({antialias:!0,alpha:!0});i.setSize(c.clientWidth,c.clientHeight),i.shadowMap.enabled=!0,i.shadowMap.type=ct,i.setPixelRatio(window.devicePixelRatio),n.current=i;const o=new vt(u,i.domElement);o.enableDamping=!0,o.dampingFactor=.05,o.screenSpacePanning=!1,o.minDistance=4,o.maxDistance=6,o.minAzimuthAngle=-Math.PI/6,o.maxAzimuthAngle=Math.PI/6,o.minPolarAngle=Math.PI/2-Math.PI/6,o.maxPolarAngle=Math.PI/2+Math.PI/6,o.enablePan=!1,s.current=o,c.appendChild(i.domElement);const b=new lt(6316128,1.2);h.add(b);const g=new Te(16777215,1.2);g.position.set(5,10,7),g.castShadow=!0,h.add(g);const m=new Te(7829503,.7);m.position.set(-5,-5,-5),h.add(m);const M=new ut(5164484,1,100);M.position.set(0,3,3),h.add(M);const T=new dt;h.add(T),E.current=T;const P=()=>{var N;v.current=requestAnimationFrame(P),(N=s.current)==null||N.update(),i.render(h,u)};return P(),()=>{v.current&&cancelAnimationFrame(v.current),s.current&&s.current.dispose(),c.removeChild(i.domElement),i.dispose()}},[]),f.useEffect(()=>{const c=()=>{if(!r.current||!e.current||!n.current)return;const h=r.current.clientWidth,u=r.current.clientHeight;e.current.aspect=h/u,e.current.updateProjectionMatrix(),n.current.setSize(h,u)};return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]),f.useEffect(()=>{if(!j||!E.current)return;R.current.forEach(i=>{var o;return(o=E.current)==null?void 0:o.remove(i)}),p.current.forEach(i=>{var o;return(o=E.current)==null?void 0:o.remove(i)}),R.current=[],p.current=[];const{landmarks:c,connections:h,jointAngles:u}=j;if(!(!c||c.length===0)){if(x.current&&u){let i='<div class="angle-title">ÂÖ≥ËäÇËßíÂ∫¶</div><div class="angle-grid">';u.leftElbow&&(i+=`<div class="angle-item"><span class="angle-label">Â∑¶ËÇò:</span><span class="angle-value">${u.leftElbow}¬∞</span></div>`),u.rightElbow&&(i+=`<div class="angle-item"><span class="angle-label">Âè≥ËÇò:</span><span class="angle-value">${u.rightElbow}¬∞</span></div>`),u.leftKnee&&(i+=`<div class="angle-item"><span class="angle-label">Â∑¶ËÜù:</span><span class="angle-value">${u.leftKnee}¬∞</span></div>`),u.rightKnee&&(i+=`<div class="angle-item"><span class="angle-label">Âè≥ËÜù:</span><span class="angle-value">${u.rightKnee}¬∞</span></div>`),u.leftShoulder&&(i+=`<div class="angle-item"><span class="angle-label">Â∑¶ËÇ©:</span><span class="angle-value">${u.leftShoulder}¬∞</span></div>`),u.rightShoulder&&(i+=`<div class="angle-item"><span class="angle-label">Âè≥ËÇ©:</span><span class="angle-value">${u.rightShoulder}¬∞</span></div>`),i+="</div>",x.current.innerHTML=i}c.forEach((i,o)=>{var P;if(i.visibility<.3)return;let b=.12;o===11||o===12||o===23||o===24?b=.18:(o===13||o===14||o===25||o===26)&&(b=.15);const g=new pt(b,24,24);let m=65280;o<=10?m=16724787:o===11||o===12?m=65535:o===23||o===24?m=3368703:o>=25&&o<=32?m=16750848:o>=15&&o<=22&&(m=16738047);const M=new mt({color:m,shininess:100,specular:2236962,emissive:m,emissiveIntensity:.3}),T=new ft(g,M);T.position.set((i.x-.5)*10,(.5-i.y)*10,(i.z-.5)*10),M.opacity=.9+i.visibility*.1,M.transparent=!0,(P=E.current)==null||P.add(T),R.current.push(T)}),h.forEach(([i,o])=>{var N;if(i>=c.length||o>=c.length)return;const b=c[i],g=c[o];if(b.visibility<.3||g.visibility<.3)return;const m=[];m.push(new O((b.x-.5)*10,(.5-b.y)*10,(b.z-.5)*10)),m.push(new O((g.x-.5)*10,(.5-g.y)*10,(g.z-.5)*10));const M=new ht().setFromPoints(m),T=new gt({color:16777215,linewidth:5,transparent:!0,opacity:.9}),P=new bt(M,T);(N=E.current)==null||N.add(P),p.current.push(P)})}},[j]),l.jsxs("div",{className:"pose-visualizer",children:[l.jsx("div",{className:"visualizer-header",children:l.jsx("h3",{children:"3D ÂßøÊÄÅÂèØËßÜÂåñ"})}),l.jsx("div",{ref:r,className:"visualizer-container"}),l.jsx("div",{ref:x,className:"angle-display"})]})};function Lt(){const[j,r]=f.useState(null),A=e=>{r(e)};return l.jsxs("div",{className:"App",children:[l.jsxs("header",{className:"app-header",children:[l.jsx("h1",{className:"app-title",children:"MediaPipe 2.0+ ÂßøÊÄÅËØÜÂà´"}),l.jsx("p",{className:"app-subtitle",children:"ÂÆûÊó∂3DÈ™®È™ºÂèØËßÜÂåñ - Ë∑üÈöè‰Ω†ÁöÑÁúüÂÆûÂßøÊÄÅËßíÂ∫¶"})]}),l.jsxs("main",{className:"app-content",children:[l.jsx(Tt,{onPoseDetection:A}),l.jsx(xt,{poseData:j})]}),l.jsx("footer",{className:"app-footer",children:l.jsx("p",{children:"Âü∫‰∫é MediaPipe Tasks Vision API ÊûÑÂª∫ | ÊîØÊåÅÂÆûÊó∂ÂßøÊÄÅËßíÂ∫¶ÂêåÊ≠•"})})]})}se.createRoot(document.getElementById("root")).render(l.jsx(Je.StrictMode,{children:l.jsx(Lt,{})}));
